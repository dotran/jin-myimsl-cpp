<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Setting Color</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="The PLplot Plotting Library"
HREF="index.html"><LINK
REL="UP"
TITLE="Advanced Use of PLplot"
HREF="advanced.html"><LINK
REL="PREVIOUS"
TITLE="Setting the Area Fill Pattern"
HREF="fill-pattern.html"><LINK
REL="NEXT"
TITLE="Setting Character Attributes"
HREF="characters.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="stylesheet.css"></HEAD
><BODY
CLASS="sect1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>The PLplot Plotting Library: Programmer's Reference Manual</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="fill-pattern.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapter 3. Advanced Use of PLplot</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="characters.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="sect1"
><H1
CLASS="sect1"
><A
NAME="color"
>Setting Color</A
></H1
><P
> Normally, color is used for all drivers and devices that support
    it within PLplot subject to the condition that the user has the option
    of globally turning off the color (and subsequently turning it on again
    if so desired) using <A
HREF="plscolor.html"
><CODE
CLASS="function"
>plscolor</CODE
></A
>. </P
><P
> The PLplot color model utilizes two color maps which can be used
    interchangeably.  However, color map0 (discussed in <A
HREF="color.html#color-map-0"
>the Section called <I
>Color Map0</I
></A
>) has discrete colors with no particular order
    and is most suited to coloring the background, axes, lines, and labels,
    and color map1 (discussed in <A
HREF="color.html#color-map-1"
>the Section called <I
>Color Map1</I
></A
>) has
    continuously changing colors and is most suited to plots (see <A
HREF="contour-plots.html"
>the Section called <I
>Contour and Shade Plots</I
></A
>) in which data values are represented by
    colors. </P
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="color-map-0"
>Color Map0</A
></H2
><P
> Color map0 is most suited to coloring the background, axes,
    lines, and labels.  Generally, the default color map0 palette of 16
    colors is used. (<TT
CLASS="filename"
>examples/c/x02c.c</TT
> illustrates
    these colors.) The default background color is taken from the index 0
    color which is black by default.  The default foreground color is red.
    </P
><P
> There are a number of options for changing the default red on
    black colors.  The user may set the index 0 background color using the
    command-line <TT
CLASS="literal"
>bg</TT
> parameter or by calling <A
HREF="plscolbg.html"
><CODE
CLASS="function"
>plscolbg</CODE
></A
>
    (or <A
HREF="plscol0.html"
><CODE
CLASS="function"
>plscol0</CODE
></A
> with a 0 index) <SPAN
CLASS="emphasis"
><I
CLASS="emphasis"
>before</I
></SPAN
> <A
HREF="plinit.html"
><CODE
CLASS="function"
>plinit</CODE
></A
>.
    During the course of the plot, the user can change the foreground color
    as often as desired using <A
HREF="plcol0.html"
><CODE
CLASS="function"
>plcol0</CODE
></A
> to select the index of the desired
    color. </P
><P
> For more advanced use it is possible to define an arbitrary map0
    palette of colors. The user may set the number of colors in the map0
    palette using the command-line <TT
CLASS="literal"
>ncol0</TT
> parameter or by
    calling <A
HREF="plscmap0n.html"
><CODE
CLASS="function"
>plscmap0n</CODE
></A
>.  <A
HREF="plscol0.html"
><CODE
CLASS="function"
>plscol0</CODE
></A
> sets the RGB value of the given index
    which must be less than the maximum number of colors (which is set by
    default, by command line, by <A
HREF="plscmap0n.html"
><CODE
CLASS="function"
>plscmap0n</CODE
></A
>, or even by <A
HREF="plscmap0.html"
><CODE
CLASS="function"
>plscmap0</CODE
></A
>).
    Alternatively, <A
HREF="plscmap0.html"
><CODE
CLASS="function"
>plscmap0</CODE
></A
> sets up the entire map0 color palette. For
    all these ways of defining the map0 palette any number of colors are
    allowed in any order, but it is not guaranteed that the individual
    drivers will actually be able to use more than 16 colors. </P
></DIV
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="color-map-1"
>Color Map1</A
></H2
><P
> Color map1 is most suited to plots (see <A
HREF="contour-plots.html"
>the Section called <I
>Contour and Shade Plots</I
></A
>) in which data values are represented by
    colors. The data are scaled to the input map1 range of floating point
    numbers between 0. and 1. which in turn are mapped (using <A
HREF="plcol1.html"
><CODE
CLASS="function"
>plcol1</CODE
></A
>) to
    colors using a default or user-specified map1 color transformation.  Thus,
    there are calls to <A
HREF="plcol1.html"
><CODE
CLASS="function"
>plcol1</CODE
></A
> from within the code for <A
HREF="plshade.html"
><CODE
CLASS="function"
>plshade</CODE
></A
> (see
    <TT
CLASS="filename"
>src/plshade.c</TT
>) and <A
HREF="plsurf3d.html"
><CODE
CLASS="function"
>plsurf3d</CODE
></A
> (see
    <TT
CLASS="filename"
>src/plot3d.c</TT
>) to give a continuous range of
    color corresponding to the data being plotted. In addition <A
HREF="plcol1.html"
><CODE
CLASS="function"
>plcol1</CODE
></A
> can
    be used to specify the foreground color using the map1 continuous color
    palette (see the commented out section of
    <TT
CLASS="filename"
>examples/c/x12c.c</TT
> which gives an example of this
    for a histogram), but normally <A
HREF="plcol0.html"
><CODE
CLASS="function"
>plcol0</CODE
></A
> is a better tool for this job
    (see <A
HREF="color.html#color-map-0"
>the Section called <I
>Color Map0</I
></A
>) since discrete colors often give
    a better-looking result. </P
><P
> For more advanced use it is possible to define an arbitrary map1
    palette of colors. The user may set the number of colors in this palette
    using the command-line <TT
CLASS="literal"
>ncol1</TT
> parameter or by calling
    <A
HREF="plscmap1n.html"
><CODE
CLASS="function"
>plscmap1n</CODE
></A
>.  Furthermore, <A
HREF="plscmap1l.html"
><CODE
CLASS="function"
>plscmap1l</CODE
></A
> can be used to set the map1 color
    palette using linear interpolation between control points specified in
    either RGB or HLS space.</P
><P
> There is a one-to-one correspondence between RGB and HLS color
    spaces.  RGB space is characterized by three 8-bit unsigned integers
    corresponding to the intensity of the red, green, and blue colors. Thus,
    in hexidecimal notation with the 3 bytes concatanated together the RGB
    values of FF0000, FFFF00, 00FF00, 00FFFF, 0000FF, FF00FF, 000000, and
    FFFFFF correspond to red, yellow, green, cyan, blue, magenta, black, and
    white. </P
><P
> HLS (hue, lightness, and saturation) space is often conceptually
    easier to use than RGB space.  One useful way to visualize HLS space is
    as a volume made up by two cones with their bases joined at the
    <SPAN
CLASS="QUOTE"
>"equator"</SPAN
>.  A given RGB point corresponds to HLS point
    somewhere on or inside the double cones, and vice versa. The hue
    corresponds to the <SPAN
CLASS="QUOTE"
>"longitude"</SPAN
> of the point with 0, 60,
    120, 180, 240, and 300 degrees corresponding to red, yellow, green,
    cyan, blue, and magenta. The lightness corresponds to the distance along
    the axis of the figure of a perpendicular dropped from the HLS point to
    the axis. This values ranges from 0 at the <SPAN
CLASS="QUOTE"
>"south pole"</SPAN
> to
    1 at the <SPAN
CLASS="QUOTE"
>"north pole"</SPAN
>.  The saturation corresponds to the
    distance of the HLS point from the axis with the on-axis value being 0
    and the surface value being 1. Full saturation corresponds to full color
    while reducing the saturation (moving toward the axis of the HLS figure)
    mixes more gray into the color until at zero saturation on the axis of
    the figure you have only shades of gray with the variation of lightness
    along the axis corresponding to a gray scale. </P
><P
> Here are some C-code fragments which use <A
HREF="plscmap1l.html"
><CODE
CLASS="function"
>plscmap1l</CODE
></A
> to set the
    map1 color palette. This first example illustrates how to set up a
    gray-scale pallette using linear interpolation in RGB space.

<TABLE
CLASS="verbatim"
><TR
><TD
><PRE
CLASS="programlisting"
>    i[0] = 0.;
    i[1] = 1.;
    /* RGB are rescaled to the range from 0 to 1. for input to plscmap1l.*/
    r[0] = 0.;
    r[1] = 1.;
    g[0] = 0.;
    g[1] = 1.;
    b[0] = 0.;
    b[1] = 1.;
    plscmap1l(1, 2, i, r, g, b, NULL);</PRE
></TD
></TR
></TABLE
>
    </P
><P
> This second example illustrates doing the same thing in HLS
    space.

<TABLE
CLASS="verbatim"
><TR
><TD
><PRE
CLASS="programlisting"
>    i[0] = 0.;
    i[1] = 1.;
    /* Hue does not matter for zero saturation.*/
    h[0] = 0.;
    h[1] = 0.;
    /* Lightness varies through its full range.*/
    l[0] = 0.;
    l[1] = 1.;
    /* Saturation is zero for a gray scale.*/
    s[0] = 0.;
    s[1] = 0.;
    /* Note the first argument which specifies HLS space.*/
    plscmap1l(0, 2, i, h, l, s, NULL);</PRE
></TD
></TR
></TABLE
>
    </P
><P
> This final example using <A
HREF="plscmap1l.html"
><CODE
CLASS="function"
>plscmap1l</CODE
></A
> illustrates how the default
    map1 color pallette is set with just 4 control points (taken from
    <TT
CLASS="filename"
>src/plctrl.c</TT
>).

<TABLE
CLASS="verbatim"
><TR
><TD
><PRE
CLASS="programlisting"
>/*--------------------------------------------------------------------------*\
 * plcmap1_def()
 *
 * Initializes color map 1.
 *
 * The default initialization uses 4 control points in HLS space, the two
 * inner ones being very close to one of the vertices of the HLS double
 * cone.  The vertex used (black or white) is chosen to be the closer to
 * the background color.  If you don't like these settings you can always
 * initialize it yourself.
\*--------------------------------------------------------------------------*/

static void
plcmap1_def(void)
{
    PLFLT i[4], h[4], l[4], s[4], vertex = 0.;

/* Positions of control points */

    i[0] = 0;		/* left boundary */
    i[1] = 0.45;	/* just before center */
    i[2] = 0.55;	/* just after center */
    i[3] = 1;		/* right boundary */

/* For center control points, pick black or white, whichever is closer to bg */
/* Be carefult to pick just short of top or bottom else hue info is lost */

    if (plsc-&#62;cmap0 != NULL)
	vertex = ((float) plsc-&#62;cmap0[0].r +
		  (float) plsc-&#62;cmap0[0].g +
		  (float) plsc-&#62;cmap0[0].b) / 3. / 255.;

    if (vertex &#60; 0.5)
	vertex = 0.01;
    else
	vertex = 0.99;

/* Set hue */

    h[0] = 260;		/* low: blue-violet */
    h[1] = 260;		/* only change as we go over vertex */
    h[2] = 0;		/* high: red */
    h[3] = 0;		/* keep fixed */

/* Set lightness */

    l[0] = 0.5;		/* low */
    l[1] = vertex;	/* bg */
    l[2] = vertex;	/* bg */
    l[3] = 0.5;		/* high */

/* Set saturation -- keep at maximum */

    s[0] = 1;
    s[1] = 1;
    s[2] = 1;
    s[3] = 1;

    c_plscmap1l(0, 4, i, h, l, s, NULL);
}</PRE
></TD
></TR
></TABLE
> 
</P
><P
> Finally, <A
HREF="plscmap1.html"
><CODE
CLASS="function"
>plscmap1</CODE
></A
> is an additional method of setting the map1
    color palette directly using RGB space.  No interpolation is used with
    <A
HREF="plscmap1.html"
><CODE
CLASS="function"
>plscmap1</CODE
></A
> so it is the programmer's responsibility to make sure that
    the colors vary smoothly.  Here is an example of the method taken from
    <TT
CLASS="filename"
>examples/c/x08c.c</TT
> which sets (yet again) the
    gray-scale color pallette.

<TABLE
CLASS="verbatim"
><TR
><TD
><PRE
CLASS="programlisting"
>    for (i=0;i&#60;n_col;i++)
        rr[i] = gg[i] = bb[i] = i*256/n_col;
    plscmap1(rr,gg,bb,n_col);</PRE
></TD
></TR
></TABLE
> 
</P
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="fill-pattern.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="characters.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Setting the Area Fill Pattern</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="advanced.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Setting Character Attributes</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>